
\documentclass[11pt]{article}

\usepackage[margin=0.5in,top=0.8in,bottom=0.8in]{geometry}
\usepackage{amsmath,amssymb, hyperref}

\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}
\newcommand{\beqn}{\begin{eqnarray}}
\newcommand{\eeqn}{\end{eqnarray}}
\newcommand{\ve}[1]{\mbox{\boldmath $#1$}}
\newcommand{\la}{\stackrel{<}{ _{\sim}}}

\numberwithin{equation}{section}

\begin{document}

\title{Airplane Seat Puzzle: Analytic Solution}
\author{Yuk Tung Liu}
\date{2018-03-30}
\maketitle

\section{Introduction}

This math puzzle states that $N$ people line up to board 
a plane with $N$ seats. The first person in line has 
lost his boarding pass and randomly chooses a seat. 
After that, each person entering the plane sits in 
their assigned seat if it is unoccupied, or if it 
is occupied, chooses an unoccupied seat randomly. 
What is the probability that the last person sits 
in his assigned seat? 

Here I consider a more general problem: what is the 
probability that the $i$-th person ends up in the 
wrong seat (i.e.\ a seat {\it not} assigned to the person)? 
Here $2 \leq i \leq N$.

Let $p_i$ ($2 \leq i \leq N$) be the probability that the $i$-th person ends up in the
wrong seat. This is also the probability that when the $i$-th person 
boards the plane, he/she will find his/her seat taken. 

Let's number the seats as 1, 2, 3, $\cdots$, N, where 
seat number 1 is the seat assigned to the first person, seat number 2 
is the seat assigned to the second person and so on. 

\section{Lemma}

The first observation is that if a person, say the $i$-th person 
with $2 \leq i \leq N$, finds his/her seat occupied, then seats 2, 3, 
$\cdots$, $i$ are occupied; seats 1, $i+1, i+2, \cdots, N$ are 
empty. To prove this, let's go through the boarding process. 
The first person (let's say he's a male) chooses a random seat. If he happens to choose 
seat 1, all the other people will sit in their assigned seats and 
no one will find their seats occupied by other people. If the 
first person does not choose seat 1, but chooses seat $i_1 > 1$. Then seats 
$2, 3, \cdots$, $i_1-1$ will be taken by the people assigned to them. 
When the $i_1$-th person boards the plane, all seats from 2 to $i_1$ 
are taken. The empty seats are seats $1, i_1+1, i_1+2, \cdots, N$. If the $i_1$-th person 
(let's say she's a female)
chooses seat 1, all the other people following her will sit in their assigned seats. 
If she chooses seat $i_2 > i_1$, all seats from $i_1+1$ to $i_2-1$ will be 
occupied by the right people. When the $i_2$-th person boards the plane, 
seats 2, 3, $\cdots$, $i_2$ are occupied. The empty seats are seats $1, i_2+1, i_2+2, 
\cdots, N$. We are back to the similiar situation as the $i_1$-th person: 
the $i_2$-th person can take seat 1, in which case seats $i_2+1, \cdots, N$ will be 
occupied by the right people. Or if the $i_2$-th person takes a seat $i_3 > i_2$, 
seats $i_2+1, \cdots, i_3-1$ will be occupied by the right people. When the $i_3$-th 
person boards the planes, seats $2, 3, \cdots i_3$ are occupied. The empty seats 
are seats $1, i_3+1, i_3+2, \cdots, N$ and the process continues. In all cases, 
whenever a person, say person $i$, finds his/her seat occupied, seats $2, 3, \cdots, i$ 
are also occupied and seats $1, i+1,i+2,\cdots, N$ are empty. This completes the proof.

\section{Calculation of \ve{p_i} -- Method 1: Minimal Math}

Let the $j$-th person be the last person 
who chooses a random seat before the $i$-th person 
boards the plane. $j$ can be any integer from 1 (the first person) to $i-1$. 
If the $j$-th person happens to be the first person ($j=1$), he must have 
taken either seat 1 or seat $i$ or seat $i+1$ or ... or seat $N$. This is because 
if he has taken seat $k$ with $2 \leq k \leq i-1$, the $k$-th person 
will find his/her seat occupied when he/she boards the plane and he/she has to 
choose a random seat. But this is impossible since 
we already say that the first person is the last person before the $i$-th person 
who randomly chooses a seat. The same conclusion holds for other values of $j$. 
Since when the $j$-th person (let's say he's a male) boards the plane and finds 
his seat taken, he must have 
chosen seat 1 or seat $i+1$ or seat $i+2$ or ... or seat $N$. For if he has chosen 
seat $k$ with $j+1 \leq k \leq i-1$, he would not have been the last person before 
the $i$-th person who chooses a random seat. So the conclusion is that the $j$-th 
person must have chosen seat 1 or seat $i$ or seat $i+1$ or seat $i+2$ or ... or seat $N$. 
There are $N-i+2$ possible seats the $j$-th person must have chosen. Since 
the $j$-th person randomly chooses a seat, any one of these seats will be chosen randomly 
with a probability of $1/(N-i+2)$. Hence seat $i$ will be taken when the $i$-th person 
boards the plane only if the $j$-th person has chosen seat $i$. Therefore, we conclude that 
\beq
  \boxed{ p_i = \frac{1}{N-i+2} \ \ \ , \ \ 2 \leq i \leq N }
\eeq

This calculation is a straightforward generalization of the calculation of 
the original math puzzle you can find easily on the internet. 

Consistency check: when $i=N$, we have $p_N = 1/2$ consistent with the 
well-known result. When $i=2$, we have $p_2 = 1/N$. This also makes sense 
since the only way seat 2 is occupied when the second person boards the 
plane is when the first person chooses seat 2. Since the first person chooses 
a seat randomly from seats 1 to $N$. The probability that he will choose 
seat 2 is $1/N$.

\section{Calculation of \ve{p_i} -- Method 2: Using a Recursion Formula}

If seat $i$ is taken when the $i$-th person boards the plane, it must have been 
taken by one of the first $(i-1)$ people.
These $(i-1)$ possibilities are mutually exclusively, 
so $p_i$ is given by the sum of all these $(i-1)$ probabilities. The probability 
that the first person takes seat $i$ is $1/N$. For the second person to take seat $i$, 
his/her seat must have been taken when he/she boards the plane and he/she has $N-1$ 
empty seats to choose. Note that seat $i$ is one of the $N-1$ empty seats from the 
above analysis. So the probability that the second person takes seat $i$ is 
$p_2 \times 1/(N-1)$. For the third person to take seat $i$, 
his/her seat must have been taken when he/she boards the plane and he/she has 
$N-2$ empty seats to choose. Again, seat $i$ is one of the $N-2$ empty seats. 
So the  probability that the third person takes seat $i$ is 
$p_3 \times 1/(N-2)$. The probability for the other people before the $i$-th 
person to take seat $i$ can be calculated in the same way. Therefore, 
\beq
  p_i = \frac{1}{N} + \frac{p_2}{N-1} + \frac{p_3}{N-2} + \cdots 
+ \frac{p_{i-1}}{N-i+2} .
\label{eq:pi1}
\eeq
This equation holds for all $2 \leq i \leq N$. Changing $i$ to $i-1$ in 
the above equation gives 
\beq
  p_{i-1} = \frac{1}{N} + \frac{p_2}{N-1} + \frac{p_3}{N-2} + \cdots
+ \frac{p_{i-2}}{N-i+3} .
\eeq
This is simply the first $(i-2)$ terms in equation~(\ref{eq:pi1}). Hence, 
\beq
  p_i = p_{i-1} + \frac{p_{i-1}}{N-i+2} = p_{i-1} \frac{N-i+3}{N-i+2} .
\label{eq:pi2}
\eeq
We know that $p_2=1/N$. Setting $i=3$ in the above equation gives $p_3=1/(N-1)$. Setting 
$i=4$ and using $p_3=1/(N-1)$ gives $p_4=1/(N-2)$. Therefore, the solution 
to the recursion equation~(\ref{eq:pi2}) with $p_2=1/N$ is 
\beq
  \boxed{p_i = \frac{1}{N-i+2} \ \ \ , \ \ 2 \leq i \leq N }
\eeq
This is the same formula derived before.

\end{document}
